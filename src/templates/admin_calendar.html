{% extends 'base.html' %}
{% block title %}Calendario de Registros{% endblock %}
{% block header %}Calendario de estado de empleados{% endblock %}
{% block content %}
<section class="bg-gray-800 shadow-md rounded-lg p-6 mb-6">
  <h2 class="text-lg font-semibold mb-2 text-white">Calendario de estado de empleados</h2>
  <div id="employee-calendar"></div>
</section>

<!-- FullCalendar CSS y JS (bundle global v6) -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.17/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.17/index.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.17/locales-all.global.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  console.log(window.FullCalendar); // para verificar que existe
  var calendarEl = document.getElementById('employee-calendar');
  var calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    locale: 'es',
    height: 'auto',
    events: '/admin/api/events',
    eventDisplay: 'block',
    eventClick: function(info) {
      var props = info.event.extendedProps;
      alert(
        'Categor√≠a: ' + (props.category || '') +
        '\nEstado: ' + info.event.title +
        (props.notes ? '\nNotas: ' + props.notes : '')
      );
    }
  });
  calendar.render();
});
</script>
{% endblock %}
